# Приложение «Список контактов»

### Этап 1: Настройка проекта и окружения

На этом этапе настраиваем сборку:

*   **`start.spring.io`**: Создание скелета проекта со следующими зависимостями:
    *   `Spring Web`: для создания веб-приложения и MVC-контроллеров.
    *   `Spring Data JDBC`: для работы с базой данных через `JdbcTemplate`.
    *   `Thymeleaf`: шаблонизатор для создания пользовательского интерфейса.
    *   `PostgreSQL Driver`: драйвер для подключения к нашей базе данных.
    *   `Lombok`: для сокращения шаблонного кода.
     
*   **`Dockerfile`**: Создаем файл для сборки Docker-образа самого приложения. Он будет использовать `openjdk:17-oracle` в качестве базового образа, копировать собранный JAR-файл и определять команду для запуска.
*   **`docker-compose.yml`**: Создаем файл для запуска контейнера с базой данных PostgreSQL. В нем будут определены имя сервиса, образ, порты и переменные окружения (имя пользователя, пароль, имя базы данных).
*   **`application.properties`**: Настройка подключения к базе данных. Здесь указывае URL, имя пользователя и пароль, которые будут соответствовать настройкам из `docker-compose.yml`.
*   **`Contact.java`**: Создаем класса-сущность `Contact` с полями `id`, `firstName`, `lastName`, `email`, `phone`. Используем аннотации Lombok (`@Data`, `@AllArgsConstructor`) для автоматической генерации методов.
*   **`resources/schema.sql`**: Создаем SQL-скрипта, который будет автоматически выполняться при старте приложения и создавать таблицу `contacts` в базе данных.
*   **`ContactInitializer.java`**: Инициализируем 10 контактов из файла `default-contacts.txt`. Через профиль `spring.profiles.active=init`. 

### Этап 2: Слой доступа к данным (Repository). Создание связки Модель-Маппер-Репозиторий с `JdbcTemplate

        В файле MMR.md
  [Создание связки Модель-Маппер-Репозиторий с `JdbcTemplate](MMR.md)

### Этап 3: Слой представления (Controller)

Создаем веб-интерфейс и контроллеров для обработки HTTP-запросов.

*   **`ContactController.java`**: Создаем класса, помеченный аннотацией `@Controller`.
    *   В него внедрена зависимость `ContactService`.
    *   Созданы методы, обрабатывающие запросы (помеченные `@GetMapping` и `@PostMapping`):
        *   `GET /`: получение всех контактов и отображение главной страницы (`list.html`).
        *   `GET /add`: отображение формы для создания нового контакта (`edit-form.html`).
        *   `POST /save`: обработка данных из формы, сохранение контакта и перенаправление на главную страницу.
        *   `GET /edit/{id}`: получение контакта по ID и отображение той же формы (`edit-form.html`), но уже с предзаполненными данными.
        *   `GET /delete/{id}`: удаление контакта по ID и перенаправление на главную страницу.
   
* **`resources/templates/list.html`**: Создан Thymeleaf-шаблон для отображения списка всех контактов в виде таблицы.
    *   Используем `th:each` для итерации по списку контактов.
    *   Для каждой строки таблицы добавлены кнопки/ссылки "Редактировать" и "Удалить".
  
* **`resources/templates/edit-form.html`**: Создаем форму для создания и редактирования контакта.
    *   Использование `th:object` для привязки формы к объекту `Contact`.
    *   Использование `th:field` для каждого поля ввода.
    *   Содержит скрытое поле для `id` (`<input type="hidden" ...>`), чтобы при редактировании мы знали, какую запись обновлять.

### Этап 4: Слой бизнес-логики (Service)

*   **`ContactService.java`**: Создаем интерфейса сервиса, который будет определять основные бизнес-операции (например, `findAllContacts`, `saveContact`, `deleteContactById`).
*   **`ContactServiceImpl.java`**: Реализация интерфейса сервиса.
    *   Класс помечен аннотацией `@Service`.
    *   В внедрена зависимость `ContactRepository`.
    *   Методы этого класса вызывают соответствующие методы репозитория.

### Этап 5: Документация

*   *   README.md
    *   Как запустить базу данных и приложение через `docker-compose up`.
        
    *   1.Подключиться к базе данных (при желании).
    *   2.Запустить команду  **`docker-compose up --build`**
    *   3.Перейти в браузере на  http://localhost:8086
