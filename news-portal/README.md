# Практическая работа: Создание REST API для новостного сервиса

### Запуск приложения

1. Выполните **.\docker\docker-start.cmd**

2. Выполнится инициализация:

   `ROLE_USER` - Обычный пользователь. Может просматривать и редактировать **только свои** данные.
   `ROLE_MODERATOR` - Модератор. Может просматривать всех пользователей, создавать новых, а также редактировать и удалять **любого** пользователя, кроме администраторов.
   `ROLE_ADMIN` - Администратор. Обладает полными правами на управление пользователями.

3. Можно открыть Swagger в браузере http://localhost:8081/swagger-ui/index.html
   Страница загрузится с авторизацией.

4. Можно начать тестирование по ролям и **endpoint**.

### Тестирование API

#### 1. ROLE_USER (user1 / password1)

**Позитивные тесты:**

*   **GET /api/v1/users/{id} (свой ID)**
   *   **Запрос:** `GET /api/v1/users/1` (авторизован как `user1`)
   *   **Ожидаемый результат:** `200 OK`, возвращает данные `user1`.
*   **PUT /api/v1/users/{id} (свой ID)**
   *   **Запрос:** `PUT /api/v1/users/1` с обновленными данными для `user1`.
   *   **Ожидаемый результат:** `200 OK`, возвращает обновленные данные `user1`.
*   **DELETE /api/v1/users/{id} (свой ID)**
   *   **Запрос:** `DELETE /api/v1/users/1` (авторизован как `user1`)
   *   **Ожидаемый результат:** `204 No Content`.

**Негативные тесты:**
         
   *   **GET /api/v1/users (все пользователи)**
   *   **Запрос:** `GET /api/v1/users` (авторизован как `user1`)
   *   **Ожидаемый результат:** `403 Forbidden`.
*   **GET /api/v1/users/{id} (чужой ID)**
   *   **Запрос:** `GET /api/v1/users/2` (авторизован как `user1`)
   *   **Ожидаемый результат:** `403 Forbidden`.
*   **POST /api/v1/users (создание пользователя)**
   *   **Запрос:** `POST /api/v1/users` с данными нового пользователя (авторизован как `user1`)
   *   **Ожидаемый результат:** `403 Forbidden`.
*   **PUT /api/v1/users/{id} (чужой ID)**
   *   **Запрос:** `PUT /api/v1/users/2` с обновленными данными для `user2` (авторизован как `user1`)
   *   **Ожидаемый результат:** `403 Forbidden`.
*   **DELETE /api/v1/users/{id} (чужой ID)**
   *   **Запрос:** `DELETE /api/v1/users/2` (авторизован как `user1`)
   *   **Ожидаемый результат:** `403 Forbidden`.
       ​
#### 2. ROLE_MODERATOR (moderator / moderator)

**Позитивные тесты:**

*   **GET /api/v1/users (все пользователи)**
   *   **Запрос:** `GET /api/v1/users` (авторизован как `moderator`)
   *   **Ожидаемый результат:** `200 OK`, возвращает список всех пользователей.
*   **GET /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `GET /api/v1/users/1` или `GET /api/v1/users/2` (авторизован как `moderator`)
   *   **Ожидаемый результат:** `200 OK`, возвращает данные соответствующего пользователя.
*   **POST /api/v1/users (создание пользователя)**
   *   **Запрос:** `POST /api/v1/users` с данными нового пользователя (авторизован как `moderator`)
   *   **Ожидаемый результат:** `201 Created`, возвращает данные созданного пользователя.
*   **PUT /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `PUT /api/v1/users/1` с обновленными данными для `user1` (авторизован как `moderator`)
   *   **Ожидаемый результат:** `200 OK`, возвращает обновленные данные `user1`.
*   **DELETE /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `DELETE /api/v1/users/1` (авторизован как `moderator`)
   *   **Ожидаемый результат:** `204 No Content`.

**Негативные тесты:**
*   
* (Для модератора нет специфичных негативных тестов на уровне контроллера, так как он имеет широкие права на управление пользователями. Все запросы, которые он может выполнить, должны быть успешными, если данные корректны.)
    
#### 3. ROLE_ADMIN (admin / admin)

**Позитивные тесты:**

*   **GET /api/v1/users (все пользователи)**
   *   **Запрос:** `GET /api/v1/users` (авторизован как `admin`)
   *   **Ожидаемый результат:** `200 OK`, возвращает список всех пользователей.
*   **GET /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `GET /api/v1/users/1` или `GET /api/v1/users/2` (авторизован как `admin`)
   *   **Ожидаемый результат:** `200 OK`, возвращает данные соответствующего пользователя.
*   **POST /api/v1/users (создание пользователя)**
   *   **Запрос:** `POST /api/v1/users` с данными нового пользователя (авторизован как `admin`)
   *   **Ожидаемый результат:** `201 Created`, возвращает данные созданного пользователя.
*   **PUT /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `PUT /api/v1/users/1` с обновленными данными для `user1` (авторизован как `admin`)
   *   **Ожидаемый результат:** `200 OK`, возвращает обновленные данные `user1`.
*   **DELETE /api/v1/users/{id} (любой ID)**
   *   **Запрос:** `DELETE /api/v1/users/1` (авторизован как `admin`)
   *   **Ожидаемый результат:** `204 No Content`.

**Негативные тесты:**
*   
* (Для администратора нет специфичных негативных тестов на уровне контроллера)



### Схема работы приложения

[Схема работы приложения](Creating%20a%20REST%20API%20for%20a%20news%20service.drawio)